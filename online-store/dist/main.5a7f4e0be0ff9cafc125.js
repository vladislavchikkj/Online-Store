!function(){"use strict";var t={766:function(t,e,n){n.r(e),e.default='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Online Store</title> </head> <body> <aside class="items__item item"> <div class="item__index-place"> <span class="item__index">1</span> </div> <img src="https://i.dummyjson.com/data/products/1/2.jpg" alt="#" class="item__image"> <div class="item__informations"> <h4 class="item__name">${11}</h4> <p class="item__decription">${11}</p> </div> <div class="item__count-container"> <p class="item__count">12</p> <div class="item__count-controller"> <button class="item__count-button button+">+</button> <span class="item__count-output">1</span> <button class="item__count-button button">-</button> </div> <p class="item__price">12</p> </div> </aside> </body> </html>'},482:function(t,e,n){n.r(e)},356:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Footer=void 0;var n=function(){function t(t,e){void 0===e&&(e="ru"),t.insertAdjacentHTML("beforeend",this.render())}return t.prototype.render=function(){return'\n            <footer class="footer">\n                <a href=\'https://github.com/vladislavchikkj\' class="footer-link-git">vladislavchikkj</a>\n                <div class="descr">RS-School - Online Store - 2023</div>\n                <a href=\'https://github.com/ivan52945\' class="footer-link-git">ivan52945</a>\n            </footer>\n        '},t}();e.Footer=n},209:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;var n=function(){function t(t,e){void 0===e&&(e="ru"),t.insertAdjacentHTML("beforeend",this.render())}return t.prototype.render=function(){return'\n            <header class="header page__header">\n\n                <a class="header__page-title" href="#start-page">Online store</a>\n                <div class="total-bar">Cart total: \n                    <div class="total-num">0</div>\n                </div>\n                <a class="card card_active" href="#cart-page">\n                    <div class="number-elemenst">0</div>\n                </a>\n                <a class="btn-catalog" href="#catalog-page">Catalog</a>\n\n            </header>\n        '},t}();e.Header=n},530:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;var i=n(589),a=n(661),o=n(421),r=n(259),c=n(69),s=n(636),u=function(){function t(t){var e=this;this.loaded=!1,this._page=null,this.itemList=[],this.products=[],this.loader=new r.Loader,this.loader.requestItems().then((function(t){var n,i,a,o;e.products=t.products;var r=localStorage.getItem("items");if(r){var c=JSON.parse(r);e.itemList=c.map((function(t){return{product:e.products.find((function(e){return e.id===t.id})),count:t.count}})),localStorage.clear()}e.updateTotalCart(),null===(i=null===(n=e._page)||void 0===n?void 0:n.inputProducts)||void 0===i||i.call(n,e.products),null===(o=null===(a=e._page)||void 0===a?void 0:a.inputActive)||void 0===o||o.call(a,e.itemList)})),t.insertAdjacentHTML("beforeend",this.generate()),this.cartCountOutput=document.querySelector(".number-elemenst"),this.cartPriceOutput=document.querySelector(".total-num"),this.container=document.querySelector(".wrapperCurrentPage"),this.container.addEventListener("update",(function(t){var n=t.detail,i=n.action;"add"===i?e.itemList.push({product:n.product,count:1}):"delete"===i?e.itemList=e.itemList.filter((function(t){return t.product.id!==n.product.id})):"change_count"===i&&(e.itemList=n.product),e.updateTotalCart()})),this.hash=window.location.hash,this.changePage(),this.page=this.hash,window.addEventListener("unload",(function(){var t=e.itemList.map((function(t){return{id:t.product.id,count:t.count}}));localStorage.setItem("items",JSON.stringify(t))}))}return t.prototype.generate=function(){return'<main class="wrapperCurrentPage"></main>'},t.prototype.updateTotalCart=function(){this.cartCountOutput.innerText="".concat(this.itemList.reduce((function(t,e){return t+e.count}),0)),this.cartPriceOutput.innerText="".concat(this.itemList.reduce((function(t,e){return t+e.count*e.product.price}),0))},Object.defineProperty(t.prototype,"page",{set:function(t){this.renderPageByHash()},enumerable:!1,configurable:!0}),t.prototype.changePage=function(){var t=this;window.addEventListener("hashchange",(function(){t.renderPageByHash()}))},t.prototype.renderPageByHash=function(){var t=new RegExp(/item-page\/\d/g),e=window.location.hash.slice(1);"start-page"===e||""===e?this._page=new a.StartPage(this.container):"catalog-page"===e?this._page=new i.Catalog(this.container,this.products,this.itemList):"cart-page"===e?this._page=new c.СashRegister(this.container,this.itemList):t.test(e)?this._page=new o.ItemPage(this.container,e,this.products):this._page=new s.ErrorPage(this.container)},t.prototype.checkInitialPage=function(){},t}();e.Main=u},559:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Cart=void 0;var n=function(){function t(t){var e=this;this.count=4,this.page=1,this.productsSource=[],this.products=[],this.productsSource=[],this.products=this.productsSource,t.innerHTML=this.render(),this.container=t.querySelector(".items"),this.countController=t.querySelector("input#max-count"),this.pageController=t.querySelector("input#page"),this.setOutputItems(),this.addCountHandler(),this.countController.addEventListener("input",(function(){e.pageController.max="".concat(Math.ceil(e.productsSource.length/e.count)),e.setOutputItems()})),this.pageController.addEventListener("input",(function(){e.setOutputItems()}))}return Object.defineProperty(t.prototype,"input",{set:function(t){this.productsSource=t||this.productsSource,this.pageController.max="".concat(Math.ceil(this.productsSource.length/this.count)),this.pageController.value="1",this.setOutputItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){return this.productsSource},enumerable:!1,configurable:!0}),t.prototype.setOutputItems=function(){var t=this;this.count=+this.countController.value,this.page=+this.pageController.value-1,this.products=this.productsSource.slice(this.count*this.page,this.count*(this.page+1)),this.container.innerHTML=this.products.reduce((function(e,n,i){return e+t.createItem(n,i+t.page*t.count)}),"")},t.prototype.render=function(){return'\n            <section class="basket-page__cart cart">\n                <header class="cart__header">\n                    <h2 class="cart__title">Товары в корзине</h2>\n                    <div class = "cart__paginator">\n                        <label>Max: <input type = "number" class="cart__settings-pagination" min = 2 max = 7 value = 4 id="max-count"></label>\n                        <label>Page: <input type = "number" class="cart__settings-pagination" min = 1 max = 100 value = 1 id="page"></label>\n                    </div>\n                </header>\n                <div class="cart__items items"></div>\n            </section>'},t.prototype.createItem=function(t,e){return void 0===e&&(e=0),'\n            <aside class="items__item item" data-id = '.concat(t.product.id," data-index=").concat(e+1,'>\n                <div class="item__index-place">\n                    <span class="item__index">').concat(e+1,'</span>\n                </div>\n                <img src="').concat(t.product.images[0],'" alt="').concat(t.product.title,'" class="item__image">\n                <div class="item__informations">\n                    <h4 class="item__title">').concat(t.product.title,'</h4>\n                    <p class="item__decription">').concat(t.product.description,'</p>\n                </div>\n                <div class="item__count-container">\n                    <p class="item__count">На складе:  ').concat(t.product.stock,'</p>\n                    <div class="item__count-controller">\n                        <button class="item__count-button" value="+">+</button>\n                        <span class="item__count-output">').concat(t.count,'</span>\n                        <button class="item__count-button" value="-">-</button>\n                    </div>\n                    <p class="item__price">Цена: ').concat(t.product.price*t.count,"</p>\n                </div>\n            </aside>\n            ")},t.prototype.addCountHandler=function(){var t=this;this.container.addEventListener("click",(function(e){var n=e.target.closest(".item");if(n){var i=+n.dataset.index-1,a=+n.dataset.id,o=e.target.closest("button");if(o){var r=void 0,c=t.productsSource[i].product.id;r=a===c?t.productsSource[i]:t.productsSource.find((function(t){return t.product.id===a})),"+"===o.value?r.count+=1:"-"===o.value&&(r.count-=1),t.productsSource=t.productsSource.filter((function(t){return t.count>0})),t.pageController.max="".concat(Math.ceil(t.productsSource.length/t.count)),t.setOutputItems(),t.container.dispatchEvent(new CustomEvent("update",{bubbles:!0,detail:{product:t.productsSource,action:"change_count"}}))}}}))},t}();e.Cart=n},69:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e["СashRegister"]=void 0;var i=n(559),a=n(874),o=function(){function t(t,e){var n=this;this.list=[{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:1,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:3,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:5,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:7,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:9,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:11,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:13,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1},{product:{brand:"Apple",category:"smartphones",decription:"An apple mobile which is nothing like apple",discountPercentage:12.96,id:15,images:["https://i.dummyjson.com/data/products/1/1.jpg","https://i.dummyjson.com/data/products/1/2.jpg","https://i.dummyjson.com/data/products/1/3.jpg","https://i.dummyjson.com/data/products/1/4.jpg","https://i.dummyjson.com/data/products/1/thumbnail.jpg"],price:549,rating:4.69,stock:94,thumbnail:"https://i.dummyjson.com/data/products/1/thumbnail.jpg",title:"iPhone 9"},count:1}],t.innerHTML=this.render(),this.container=t.querySelector(".basket-page"),this.cart=new i.Cart(this.container),this.cart.input=e,this.reckoning=new a.Reckoning(this.container),this.reckoning.input=this.cart.output,this.container.addEventListener("update",(function(){n.reckoning.input=n.cart.output}))}return t.prototype.inputActive=function(t){this.reckoning.input=this.cart.input=t},t.prototype.render=function(){return'<div class="basket-page"></div>'},t}();e["СashRegister"]=o},874:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Reckoning=void 0;var i=n(260),a=function(){function t(t){var e,n=this;this.products=[],this.addPromoList=[{promo:"ABC",bonus:.15},{promo:"RS",bonus:.1},{promo:"GOOD BOY",bonus:.3}],this.activePromo=new Set,t.insertAdjacentHTML("beforeend",this.render()),this.container=t.querySelector(".basket-page"),this.totalPriceOutput=t.querySelector(".reckoning__total-price"),this.promoInput=t.querySelector(".reckoning__promo-input"),this.promoButton=t.querySelector(".reckoning__promo-button"),this.status=t.querySelector(".reckoning__status"),this.promoContainer=t.querySelector(".reckoning__promo-container"),this.FinalPriceOutput=t.querySelector(".reckoning__summary"),this.promoInput.addEventListener("input",(function(){n.promoInput.value=n.promoInput.value.slice(0,8)})),this.updatePrice(),this.promoButton.addEventListener("click",(function(){var t=n.promoInput.value.toUpperCase(),e=n.addPromoList.find((function(e){return e.promo===t}));e?(n.activePromo.add(e),n.setPromoList(),n.updatePrice()):(n.status.hidden=!1,setTimeout((function(){n.status.hidden=!0}),200))})),this.mainContainer=document.querySelector(".container"),null===(e=this.mainContainer)||void 0===e||e.insertAdjacentHTML("beforeend",this.renderModal()),this.addChangeModalListeners(),this.addValidationListeners()}return t.prototype.updatePrice=function(){var t=this.products.reduce((function(t,e){return t+e.product.price*e.count}),0),e=Array.from(this.activePromo).reduce((function(t,e){return t+e.bonus}),0);this.totalPriceOutput.innerText="On cash register: ".concat(t,"$"),this.FinalPriceOutput.innerText="Summary: ".concat(Math.ceil(t*(1-e)),"$")},Object.defineProperty(t.prototype,"input",{set:function(t){this.products=t,this.updatePrice()},enumerable:!1,configurable:!0}),t.prototype.setPromoList=function(){this.promoContainer.innerHTML=Array.from(this.activePromo).sort().reduce((function(t,e){return t+'<p class="reckoning__promo-item">'.concat(e.promo,": ").concat(100*e.bonus,"%</p>")}),"")},t.prototype.render=function(){return'\n            <section class="basket-page__reckoning reckoning">\n                <p class="reckoning__total-price">On cash register: 300$</p>\n                <p class="reckoning__rules">Input promo-code for discounting</p>\n                <label class="reckoning__promo-label">Promo-code: <input type="text" class="reckoning__promo-input"></label>\n                <button class="reckoning__promo-button">Active promo</button>\n                <p class="reckoning__status" hidden>Wrong promo code</p>\n                <div class="reckoning__promo-container"></div>\n                <p class="reckoning__summary">Summary: 300$ + fisting</p>\n                <button class="reckoning__buy-button">Buy all</button>\n            </section>\n            '},t.prototype.renderModal=function(){return'\n        <div class="modal">\n        <form class="form">\n            <h2 class="form__title">Personal info</h2>\n            <ul class="personal-detail form__personal-detail">\n            <li class="personal-detail__item">\n                <input \n                class="personal-detail__input" \n                type="text" \n                placeholder="First Name & Last Name" \n                pattern="^([A-Za-zА-Яа-яЁё]{3,}\\s?){2,}" \n                title=\'Format: Minimum two words. Minimal length of each = 3\' \n                data-cartModal-inputField="name"\n                required>\n            </li>\n            <li class="personal-detail__item">\n                <input\n                class="personal-detail__input" \n                type="text" \n                placeholder="Address"\n                pattern="^([A-Za-zА-Яа-яЁё]{5,}\\s?){3,}" \n                title=\'Format: Minimum three words. Minimal length of each = 5\' \n                data-cartModal-inputField="address"\n                required>\n            </li>\n            <li class="personal-detail__item">\n                <input \n                class="personal-detail__input" \n                type="tel" \n                placeholder="Phone number" \n                pattern="\\+[0-9]{9,15}" \n                title=\'Format: +15551110000. Minimal length = 9\' \n                data-cartModal-inputField="phone"\n                required>\n            </li>\n            <li class="personal-detail__item">\n                <input \n                class="personal-detail__input" \n                type="email" \n                placeholder="E-mail"\n                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$" \n                title="example@mail.com"\n                data-cartModal-inputField="email"\n                required>\n            </li>\n            </ul>\n\n            <h2 class="form__title">Credit card</h2>\n            <ul class="card-detail form__card-detail">\n            <li class="card-detail__item">  \n                <input \n                class="card-detail__input" \n                type="tel" \n                pattern="[0-9]{4}[0-9]{4}[0-9]{4}[0-9]{4}" \n                title=\'Format: Only number. Length = 16.\' \n                placeholder="Card number" \n                maxlength="19" \n                data-cartModal-inputField="cardNumber"\n                required>\n            </li>\n            <li class="card-detail__item">\n                <label class="card-detail__label">VALID\n                <input \n                    class="card-detail__input" \n                    type="text" \n                    pattern="[0-9]{2}/[0-9]{2}" \n                    title="Format: MM/YY, month: 1-12, year: 22-39" \n                    placeholder="00/00" \n                    maxlength="5"\n                    data-cartModal-inputField="cardDate"\n                    required>\n                </label>\n            </li>\n            <li class="card-detail__item">\n                <label class="card-detail__label">CVV\n                <input \n                    class="card-detail__input" \n                    type="number" pattern="[0-9]{3}" \n                    title="Format: 000" \n                    placeholder="000" \n                    maxlength="3" \n                    data-cartModal-inputField="cardCvv"\n                    required>\n                </label>\n            </li>\n            </ul>\n            <input class="form__submit-btn" type="submit" value="CONFIRM">\n        </form>\n        </div>\n            '},t.prototype.addChangeModalListeners=function(){var t=this,e=document.querySelector(".modal"),n=document.querySelector(".reckoning__buy-button");n&&n.addEventListener("click",(function(){console.log("hi"),t.showCartModal()})),null==e||e.addEventListener("click",(function(n){n.target===e&&(console.log("click"),t.hideCartModal())})),document.addEventListener("keydown",(function(e){"Escape"===e.code&&t.hideCartModal()}))},t.prototype.showCartModal=function(){var t=document.querySelector(".modal");t.style.opacity="1",t.style.zIndex="1"},t.prototype.hideCartModal=function(){var t=document.querySelector(".modal");t.style.opacity="0",t.style.zIndex="-1"},t.prototype.addValidationListeners=function(){var t=this,e=document.querySelector(".form__submit-btn"),n=document.querySelectorAll("[data-cartmodal-inputfield]"),a=document.querySelector('[data-cartmodal-inputfield="cardNumber"]'),o=document.querySelector('[data-cartmodal-inputfield="cardCvv"]'),r=document.querySelector('[data-cartmodal-inputfield="cardDate"]'),c=document.querySelector('[data-cartmodal-inputfield="phone"]');a&&this.addMaxLengthControlListener(a),o&&this.addMaxLengthControlListener(o),null==c||c.addEventListener("keydown",(function(t){t.target instanceof HTMLInputElement&&"+"!==t.key&&"Backspace"!==t.key&&isNaN(Number(t.key))&&t.preventDefault()})),null==a||a.addEventListener("keydown",(function(t){if(t.target instanceof HTMLInputElement){"Backspace"!==t.key&&isNaN(Number(t.key))&&t.preventDefault();var e=a.value.split(" ").join("").match(/.{1,4}/g);e&&(a.value=e.join(" "))}})),null==r||r.addEventListener("keydown",(function(t){t.target instanceof HTMLInputElement&&("Backspace"!==t.key&&isNaN(Number(t.key))&&t.preventDefault(),"Backspace"!==t.key&&2===t.target.value.length&&(t.target.value+="/"))}));var s=function(t){var e=t.parentElement,n=t.dataset.cartmodalInputfield,a=t.value;return!(void 0===n||!(n in i.validateFuncs)||!i.validateFuncs[n](a))||(null==e||e.classList.add("personal-detail__input--error"),!1)};n.forEach((function(t){var e=t.parentElement;t.oninput=function(){null==e||e.classList.remove("personal-detail__input--error"),t.onblur=function(){s(t)}}})),e.onclick=function(e){var i=!0;e.preventDefault(),n.forEach((function(t){t.classList.remove("personal-detail__input--error"),i=s(t)&&i})),i&&t.onSuccessOrder()}},t.prototype.addMaxLengthControlListener=function(t){null==t||t.addEventListener("input",(function(t){if(t.target instanceof HTMLInputElement){var e=t.target;e.value.length>e.maxLength&&(e.value=e.value.slice(0,e.maxLength))}}))},t.prototype.onSuccessOrder=function(){var t=document.querySelector(".form");t&&(t.innerHTML='\n      <h2 class="form__title form__title--success">Thank you!\n      Your order has been placed.\n      Your purchase is successful.</h2>',localStorage.clear()),setTimeout((function(){window.location.href="./"}),3e3)},t}();e.Reckoning=a},589:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Catalog=void 0;var i=n(259),a=n(669),o=n(112),r=function(){function t(t,e,n){var r=this;this.products=[],this.products=e,this.active=n,t.innerHTML=this.render(),this.container=t.querySelector(".catalog-page"),this.loader=new i.Loader,this.filter=new a.Filter(this.container),this.dispay=new o.Products(this.container,this.active),this.inputProducts(this.products),this.container.addEventListener("request_filt",(function(t){r.dispay.input=r.filter.filtrate(r.products)}))}return t.prototype.save=function(){},t.prototype.inputProducts=function(t){this.products=t,this.filter.filterConfig=this.products,this.dispay.input=this.products},t.prototype.inputActive=function(t){this.active=t,this.dispay.activate=t,this.filter.filterConfig=this.products,this.dispay.input=this.products},t.prototype.render=function(){return'<div class="catalog-page"></div>'},t}();e.Catalog=r},669:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Filter=void 0;var n=function(){function t(t){this.categories={category:{label:"Категории",type:"categories",variants:new Set},brand:{label:"Брэнды",type:"categories",variants:new Set},price:{label:"Цена",type:"range",range:{from:0,to:3e3}}},this.filters={},t.insertAdjacentHTML("beforeend",this.generate()),this.container=t.querySelector(".filter"),this.enableHandler()}return Object.defineProperty(t.prototype,"filterConfig",{set:function(t){var e=this;t.forEach((function(t){var n;for(var i in e.categories)"categories"===e.categories[i].type&&(null===(n=e.categories[i].variants)||void 0===n||n.add("".concat(t[i]).toLowerCase()))})),this.generateGroup()},enumerable:!1,configurable:!0}),t.prototype.generate=function(){return'<form class="filter" name = "filter"></form>'},t.prototype.enableHandler=function(){var t=this;this.container.addEventListener("filt_update",(function(e){t.filters={},Array.from(document.querySelectorAll('[type="checkbox"]')).filter((function(t){return t.checked})).map((function(t){return{name:t.name,value:t.value}})).forEach((function(e){t.filters[e.name]||(t.filters[e.name]=new Set),t.filters[e.name].add(e.value)})),Array.from(document.querySelectorAll('[type="range"].filter__up')).forEach((function(e){t.filters[e.name]=[],t.filters[e.name][0]=+e.value})),Array.from(document.querySelectorAll('[type="range"].filter__down')).forEach((function(e){t.filters[e.name][1]=+e.value})),t.container.dispatchEvent(new CustomEvent("request_filt",{bubbles:!0,detail:t.filters}))}))},t.prototype.filtrate=function(t){var e=this,n=function(n){if(i.filters[n]instanceof Set)t=t.filter((function(t){return e.filters[n].has("".concat(t[n]).toLowerCase())}));else{var a=i.filters[n][0],o=i.filters[n][1];t=t.filter((function(t){return a<+t[n]&&+t[n]<o}))}},i=this;for(var a in this.filters)n(a);return t},t.prototype.generateGroup=function(){var t,e,n,i,a=this;this.container.innerHTML="";var o=function(o){var c="categories"===r.categories[o].type?"filter__group":"filter__range",s='\n                <div class="filter__block">\n                    <h3 class="filter__title">'.concat(r.categories[o].label,'</h3>\n                    <div div class="').concat(c,'"> </div>\n                </div>\n            ');r.container.insertAdjacentHTML("beforeend",s);var u=r.container.lastElementChild.children[1];if("categories"==r.categories[o].type)null===(t=r.categories[o].variants)||void 0===t||t.forEach((function(t){var e=t.replace(/^[^\s]{1}/,(function(t){return t.toUpperCase()}));u.innerHTML+='\n                        <div class="filter__item">\n                            <label>\n                                <input type="checkbox" name="'.concat(o,'" value="').concat(t,'">\n                                ').concat(e,"\n                            </label>\n                            \n                        </div>\n                    ")})),u.addEventListener("click",(function(t){var e=t.target.closest('input[type="checkbox"]');if(e){var n={name:e.name,type:"variant",value:null==e?void 0:e.value,check:!1};a.container.dispatchEvent(new CustomEvent("filt_update",{bubbles:!0,detail:n}))}}));else{u.innerHTML+='\n                    <input type="range" name="price" class="filter__up" value = "0" min = "0" max = '.concat(null===(e=r.categories[o].range)||void 0===e?void 0:e.to,' step= 10>\n                    <input type="range" name="price" class="filter__down" value = ').concat(null===(n=r.categories[o].range)||void 0===n?void 0:n.to,' min = "0" max = ').concat(null===(i=r.categories[o].range)||void 0===i?void 0:i.to,' step= 10>\n                    \n                    <div class="filter__from-to">\n                        <span class="price-start">1$</span>\n                        <span class="price-end">3000$</span>\n                    </div>');var d=u.querySelector(".filter__up"),l=u.querySelector(".filter__down"),p=u.querySelector(".price-start"),m=u.querySelector(".price-end");d.addEventListener("input",(function(){var t=+d.value;+l.value<t+200&&(l.value="".concat(t+200),t==+d.min&&(l.value="4")),p.textContent="".concat(d.value,"$"),m.textContent="".concat(l.value,"$")})),d.addEventListener("change",(function(){a.container.dispatchEvent(new CustomEvent("filt_update",{bubbles:!0}))})),l.addEventListener("input",(function(){var t=+d.value,e=+l.value;t>e-200&&(d.value="".concat(e-200),e==+l.max&&(d.value="".concat(+l.max-4))),p.textContent="".concat(d.value,"$"),m.textContent="".concat(l.value,"$")})),l.addEventListener("change",(function(){a.container.dispatchEvent(new CustomEvent("filt_update",{bubbles:!0}))}))}},r=this;for(var c in this.categories)o(c)},t}();e.Filter=n},259:function(t,e){var n=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,o){function r(t){try{s(i.next(t))}catch(t){o(t)}}function c(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}s((i=i.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(a=2&c[0]?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){r.label=c[1];break}if(6===c[0]&&r.label<a[1]){r.label=a[1],a=c;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(c);break}a[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(t){c=[6,t],i=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=void 0;var a=function(){function t(){this._addres="https://dummyjson.com/products"}return Object.defineProperty(t.prototype,"addres",{get:function(){return this._addres},enumerable:!1,configurable:!0}),t.prototype.requestItems=function(){return n(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,fetch(this.addres)];case 1:if(!(t=e.sent()).ok)throw Error("bad request");return[4,t.json()];case 2:return[2,e.sent()]}}))}))},t.prototype.requestItem=function(t){return n(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(this.addres,"/").concat(t))];case 1:if(!(e=n.sent()).ok)throw Error("bad request");return[4,e.json()];case 2:return[2,n.sent()]}}))}))},t}();e.Loader=a},112:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Products=void 0;var n=function(){function t(t,e){var n=this;this.products=[],this.generate=function(){return'\n        <div class="products">\n            <div class="products__sort">\n                <div class="dropdown">\n                    <button class="dropbtn">Sort options ↴</button>\n                    <div id="myDropdown" class="dropdown-content">\n                        <a data-sort="price" class = "sort-option">Sort by price</a>\n                        <a data-sort="rating" class = "sort-option">Sort by rating</a>\n                    </div>\n                </div>\n                <div class="found">Found: 30</div>\n                <form class="header__search-form search-form">\n                    <input class="search-form__input" placeholder="Выберите товар">\n                </form>\n                <div class="view-mode">\n                    <div class="big-v"></div>\n                    <div class="small-v"></div>\n                </div>\n            </div>\n            <div class="products__items">\n            </div>\n        </div>\n        '},this.createItem=function(t,e){var i=n.itemBox.has(t)?"Drop":"Add",a=n.itemBox.has(t)?"drop":"";return'<a class="item-card">\n            <div class="item__wrapper" data-id = "'.concat(t.id,'">\n                <div class="wrapper__title">').concat(t.title,'</div>\n                <div class="wrapper__item-info">\n                    <div class="wrapper__price">Price: ').concat(t.price,'</div>\n                    <div class="wrapper__price">Discount: ').concat(t.discountPercentage,'</div>\n                    <div class="wrapper__price">Rarting: ').concat(t.rating,'</div>\n                    <div class="wrapper__price">Stock: ').concat(t.stock,'</div>\n                    <div class="wrapper__price">Brand: ').concat(t.brand,'</div>\n                    <div class="wrapper__price">Category: ').concat(t.category,'</div>\n                </div>\n                <div class="item__img" style="background-image: url(').concat(t.images[0],')"></div>\n            </div>\n\n            <div class="item__buttons">\n                <button data-id = "').concat(t.id,'" data-index = "').concat(e,'" class="buttons__i ').concat(a,'">').concat(i,'</button>\n                <button detailData-id = "').concat(t.id,'" class="buttons__i">Detail</button>\n            </div>\n        </a>')},this.foundItems=30,this.dataId="",this.itemBox=new Set,this.totalBox=0,this.sumItemBox=0,t.insertAdjacentHTML("beforeend",this.generate()),this.itemBox=new Set(e.map((function(t){return t.product}))),this.container=t.querySelector(".products__items"),this.panel=t.querySelector(".dropdown"),this.dropMenu=t.querySelector(".dropdown-content"),this.back=t.querySelector(".products"),this.searchForm=t.querySelector(".search-form__input"),this.foundItemsPlace=t.querySelector(".found"),this.items=t.querySelector(".products__items"),this.currItems=t.querySelector(".item-card"),this.sizeItemBtn=t.querySelector(".view-mode"),this.cardSumItem=document.querySelector(".number-elemenst"),this.totalBar=document.querySelector(".total-num"),this.sizeItemBtn.addEventListener("click",(function(t){var e=t.target;"big-v"===e.className&&n.items.classList.add("active"),"small-v"===e.className&&n.items.classList.remove("active")})),this.items.addEventListener("click",(function(t){var e=t.target.closest(".item__wrapper");null!==e&&(n.dataId=e.getAttribute("data-id"),window.location.hash=n.dataId?"item-page/".concat(n.dataId):"error-page");var i=t.target.closest(".buttons__i");if(null==i?void 0:i.getAttribute("data-id")){n.dataId=i.getAttribute("data-id");var a=+i.getAttribute("data-index"),o=n.products[a];n.itemBox.has(o)?i.classList.contains("drop")&&(n.itemBox.delete(o),n.container.dispatchEvent(new CustomEvent("update",{bubbles:!0,detail:{product:o,action:"delete"}}))):(n.itemBox.add(o),n.container.dispatchEvent(new CustomEvent("update",{bubbles:!0,detail:{product:o,action:"add"}}))),i.classList.toggle("drop"),i.textContent=i.classList.contains("drop")?"Drop":"Add"}else(null==i?void 0:i.getAttribute("detailData-id"))&&(n.dataId=i.getAttribute("detailData-id"),window.location.hash=n.dataId?"item-page/".concat(n.dataId):"1")})),this.panel.addEventListener("click",(function(){n.toggleSortOptionMenu()})),this.dropMenu.addEventListener("click",(function(t){var e=t.target.closest(".sort-option").dataset.sort;n.sortOption=n.sortSelect(e),n.output()})),document.addEventListener("click",(function(t){n.closeSortOptionMenu(t)})),this.addHandler(this.searchForm)}return t.prototype.sortSelect=function(t){return"rating"===t?function(t,e){return e.rating-t.rating}:function(t,e){return t.price-e.price}},t.prototype.addHandler=function(t){var e=this;t.addEventListener("input",(function(t){e.output()}))},t.prototype.showFoundItem=function(t){this.foundItemsPlace.innerText="Found: ".concat(t," ")},Object.defineProperty(t.prototype,"input",{set:function(t){this.products=t,this.output()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activate",{set:function(t){this.itemBox=new Set(t.map((function(t){return t.product})))},enumerable:!1,configurable:!0}),t.prototype.output=function(){var t=this,e=this.products.filter((function(e){return e.title.toLocaleLowerCase().includes(t.searchForm.value.toLocaleLowerCase())})).sort(this.sortOption);this.container.innerHTML=e.reduce((function(e,n,i){return e+t.createItem(n,i)}),""),this.foundItems=e.length,this.showFoundItem(e.length)},t.prototype.toggleSortOptionMenu=function(){this.dropMenu.classList.toggle("show")},t.prototype.closeSortOptionMenu=function(t){t.target.closest(".dropbtn")||this.dropMenu.classList.remove("show")},Object.defineProperty(t.prototype,"getChoised",{get:function(){return Array.from(this.itemBox)},enumerable:!1,configurable:!0}),t}();e.Products=n},636:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorPage=void 0;var n=function(){function t(t){t.innerHTML=this.render(),this.container=t.querySelector(".error-page")}return t.prototype.render=function(){return'\n        <div class="error-page">\n            <div class="error-descr">\n                404 Error\n            </div>\n            <div class="error-subdescr">\n                Surry, but this page you are looking for doesn\'t exist.\n            </div>\n        </div>'},t}();e.ErrorPage=n},421:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ItemPage=void 0;var n=function(){function t(t,e,n){var i=this;this.productList=[],this.productList=n,this.container=t.querySelector(".item-page"),console.log(e),this.dataId=+e.split("/")[1],this.productItem=this.productList.find((function(t){return+t.id==+i.dataId})),console.log(this.productItem),t.innerHTML=this.render(),this.imageCard=t.querySelector(".inactive-image-wrapper"),this.currImageCard=t.querySelector(".item-image-current"),this.imageCard.addEventListener("click",(function(t){var e=t.target;i.currImageCard.style.backgroundImage="".concat(e.style.backgroundImage)}))}return t.prototype.render=function(){return'\n        <div class="item-page">\n            <div class="item-page__path">store  &nbsp &#8594 &nbsp '.concat(this.productItem.category," &#8594 &nbsp").concat(this.productItem.brand," &#8594 &nbsp").concat(this.productItem.title,'</div>\n            <div class="item-page__wrapper">\n            <div class="wrapper-blocks">\n                <div class="curr-image-wrapper">\n                    <div class="item-image-current" style="background-image: url(').concat(this.productItem.images[0],')"></div>\n                </div>\n                <div class="inactive-image-wrapper">\n                    <div class="item-image" style="background-image: url(').concat(this.productItem.images[1],')"></div>\n                    <div class="item-image" style="background-image: url(').concat(this.productItem.images[2],')"></div>\n                    <div class="item-image" style="background-image: url(').concat(this.productItem.images[3],')"></div>\n                </div>\n                \n\n                </div>\n                <div class="item-text-wrap">\n                    <div class="title">').concat(this.productItem.title,'</div>\n                    <div class="descr">Description: ').concat(this.productItem.description,'</div>\n                    <div class="discount">Discount Percentage: ').concat(this.productItem.discountPercentage,'</div>\n                    <div class="rating">Rating: ').concat(this.productItem.rating,'</div>\n                    <div class="stock">Stock: ').concat(this.productItem.stock,'</div>\n                    <div class="brand">Brand: ').concat(this.productItem.brand,'</div>\n                    <div class="category">Category: ').concat(this.productItem.category,'</div>\n                    <div class="total">\n                        <div class="total-price">Price: $1000</div>\n                        <div class="total-btn">\n                            <button>Add to card</button>\n                            <button>Buy now</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            </div>\n        </div>')},t}();e.ItemPage=n},661:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StartPage=void 0;var n=function(){function t(t){t.innerHTML=this.render(),this.container=t.querySelector(".main-page")}return t.prototype.render=function(){return'\n        <div class="main-page">\n            <div class="main-page__box">\n                Online-store\n                <a href="#catalog-page" class="btn">В каталог</a>\n            </div>\n            <div class="catalog"></div>\n        </div></div>'},t}();e.StartPage=n},528:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var i=n(209),a=n(356),o=n(530);e.default=function(t){this.language="ru",this.goods=[],t?this.container=document.querySelector(t):(document.body.innerHTML='<div class="container"></div>',this.container=document.body.children[0]),this.header=new i.Header(this.container),this.main=new o.Main(this.container),this.footer=new a.Footer(this.container)}},260:function(t,e){function n(t){return/^([A-Za-zА-Яа-яЁё]{3,})(\s[A-Za-zА-Яа-яЁё]{3,}){1,}$/.test(t)}function i(t){return/^([A-Za-zА-Яа-яЁё]{5,})(\s[A-Za-zА-Яа-яЁё]{5,}){2,}$/.test(t)}function a(t){return/\+[0-9]{9,15}$/.test(t)}function o(t){return/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/.test(t)}function r(t){return/[0-9]{4} [0-9]{4} [0-9]{4} [0-9]{4}$/.test(t)}function c(t){return/[0-9]{3}$/.test(t)}function s(t){return/(1[0-2]|0[1-9])\/([2][2-9]|[3][0-9])/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.validateFuncs=e.validateCardExpDate=e.validateCardCVV=e.validateCardNumber=e.validateEmail=e.validatePhone=e.validateAddress=e.validateName=void 0,e.validateName=n,e.validateAddress=i,e.validatePhone=a,e.validateEmail=o,e.validateCardNumber=r,e.validateCardCVV=c,e.validateCardExpDate=s,e.validateFuncs={name:n,address:i,email:o,phone:a,cardNumber:r,cardCvv:c,cardDate:s}},607:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(766),n(482),new(i(n(528)).default)}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,n),o.exports}n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(607)}();